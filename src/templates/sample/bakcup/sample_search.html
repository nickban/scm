{% extends 'base_home.html' %}
{% load static %}
{% load basename %}
{% load crispy_forms_tags %}


{% block css%}
<link rel="stylesheet" href="{% static 'css/form.css' %}">
<!-- <link rel="stylesheet" href="{% static 'css/paginator.css' %}"> -->
<link rel="stylesheet" href="https://cdn.datatables.net/1.10.20/css/dataTables.bootstrap4.min.css">


{% endblock %}


{% block content %}
  <form method="get">
    <div class="row">
        <div class="col-12 col-md-3">
            <div class="form-group">
                {{ filter.form.sample_no |as_crispy_field }}
            </div>
            <div class="form-group ">
                {{ filter.form.factory |as_crispy_field }}
            </div>
        </div>
        <div class="col-12 col-md-3">
            <div class="form-group">
                {{ filter.form.brand |as_crispy_field }}
            </div>
            <div class="form-group">
                {{ filter.form.style |as_crispy_field }}
            </div>
        </div>
        <div class="col-12 col-md-3">
            <div class="form-group">
                {{ filter.form.designer |as_crispy_field }}
            </div>
            <div class="form-group">
                {{ filter.form.status |as_crispy_field }}
            </div>
        </div>
        <div class="col-12 col-md-3">
            <div class="form-group">
                {{ filter.form.merchandiser |as_crispy_field }}
            </div>
            <div class="form-group">
                <button class="mt-4 btn btn-block btn-outline-primary" type="submit">查找</button>
            </div>
        </div>
    </div>
  </form>

  <div class="mt-3 table-responsive">
    <table id="samplesearch" class="table table-hover">
      <thead>
        <tr>
          <th>创建日期</th>
          <th>样板号</th>
          <th>款式图</th>
          <th>品牌</th>
          <th>买手</th>
          <th>跟单</th>
          <th>工厂</th>
          <th>工厂报价</th>
          <th>寄板日期</th>
          <th>状态</th>
        </tr>
      </thead>
      <tbody>
        {% for sample in object_list %}
          <tr>
            <td>{{ sample.created_date|date:"SHORT_DATE_FORMAT"  }}</td>
            <td><a href="{% url 'sample:sampleedit'  sample.pk %}">{{ sample.sample_no }}</a></td>
            <td><img src="{{ sample.os_avatar.img.url }}" width=100px, height=100px></td>
            <td>{{ sample.brand }}</td>
            <td>{{ sample.designer }}</td>
            <td>{{ sample.merchandiser }}</td>
            {% if sample.factory == None %}
              <td></td>
            {% else %}
              <td>{{ sample.factory }}</td>
            {% endif %}
            {% if sample.qutation == None %}
            <td></td>
            {% else %}
              <td>{{ sample.qutation }}</td>
            {% endif %}
            <td>{{ sample.parcel_date |date:"SHORT_DATE_FORMAT" }}</td>
            <td>{{ sample.get_status_display }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  <!-- {% include 'paginator.html'%} -->

  {% block script %}
  <script src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js" ></script>
  <script src="https://cdn.datatables.net/1.10.20/js/dataTables.bootstrap4.min.js" ></script>
  
  <script>
  $(document).ready( function () {
      $('#samplesearch').DataTable({
        
          "language": {
            "processing": "处理中...",
            "loadingRecords": "载入中...",
            "lengthMenu": "显示 _MENU_ 项结果",
            "zeroRecords": "没有符合的结果",
            "info": "显示第 _START_ 至 _END_ 项结果，共 _TOTAL_ 项",
            "infoEmpty": "显示第 0 至 0 项结果，共 0 项",
            "infoFiltered": "(从 _MAX_ 项结果中过滤)",
            "infoPostFix":  "",
            "search": "搜索:",
            "paginate": {
              "next": "下一页",
              "previous": "上一页",
            }, 
            
            
          }
          
      });
  } );
  </script>
  {% endblock %}
{% endblock %}